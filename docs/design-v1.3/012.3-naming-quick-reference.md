# Erlmd Naming Conventions - Quick Reference Card

**Version**: 1.1 | **Date**: November 14, 2025

---

## Module Prefixes

```
erlmd_                   → Core framework
erlmd_cnstr_             → Regular constructs
erlmd_cnstr_prtl_        → Partial constructs
erlmd_util_              → Utilities
erlmd_ext_               → Extensions
erlmd_pvt_               → Private/internal
```

---

## Core Abbreviations

| Full | Short | Example |
|------|-------|---------|
| construct | cnstr | `erlmd_cnstr_paragraph` |
| partial | prtl | `erlmd_cnstr_prtl_data` |
| private | pvt | `erlmd_pvt_tokenizer` |
| character | char | `erlmd_util_char` |
| reference | ref | `erlmd_util_char_ref` |
| identifier | id | `erlmd_util_normalize_id` |
| constants | const | `consts.hrl` |
| continuation | cont | `non_lazy_cont` (long names only) |

---

## Core Framework (8 modules)

```erlang
erlmd                      % Main API
erlmd_parser               % Orchestration
erlmd_tokenizer            % State machine
erlmd_state                % Dispatcher
erlmd_event                % Event types
erlmd_html                 % HTML output ✓ (NOT to_html)
erlmd_ast                  % AST output ✓ (NOT to_mdast)
erlmd_subtokenize          % Nested content
erlmd_resolve              % Post-processing
```

---

## Content Dispatchers (4 modules)

```erlang
erlmd_cnstr_document       % Top-level
erlmd_cnstr_flow           % Block-level
erlmd_cnstr_text           % Inline
erlmd_cnstr_string         % String content
```

---

## Block Constructs (11 modules)

```erlang
erlmd_cnstr_paragraph
erlmd_cnstr_heading_atx
erlmd_cnstr_heading_setext
erlmd_cnstr_thematic_break
erlmd_cnstr_code_fenced
erlmd_cnstr_code_indented
erlmd_cnstr_html_flow      % ✓ (NOT html_block)
erlmd_cnstr_block_quote
erlmd_cnstr_list_item
erlmd_cnstr_blank_line     % ✓ Regular, NOT partial
erlmd_cnstr_definition
```

---

## Inline Constructs (10 modules)

```erlang
erlmd_cnstr_attention
erlmd_cnstr_autolink
erlmd_cnstr_character_escape
erlmd_cnstr_character_reference
erlmd_cnstr_code_text
erlmd_cnstr_hard_break_escape
erlmd_cnstr_html_text
erlmd_cnstr_label_end
erlmd_cnstr_label_start_link
erlmd_cnstr_label_start_image
```

---

## Partial Constructs (8 modules)

```erlang
erlmd_cnstr_prtl_data
erlmd_cnstr_prtl_space_or_tab
erlmd_cnstr_prtl_whitespace
erlmd_cnstr_prtl_label
erlmd_cnstr_prtl_title
erlmd_cnstr_prtl_destination
erlmd_cnstr_prtl_line_ending
erlmd_cnstr_prtl_non_lazy_cont     % ✓ Abbreviated
```

---

## Utilities (7 modules)

```erlang
erlmd_util_char
erlmd_util_char_ref        % ✓ (NOT character_reference)
erlmd_util_const           % ✓ (NOT constant)
erlmd_util_normalize_id    % ✓ (NOT normalize_identifier)
erlmd_util_sanitize_uri
erlmd_util_encode
erlmd_util_position
```

---

## GFM Extensions (6 modules)

```erlang
erlmd_ext_gfm_table
erlmd_ext_gfm_strikethrough
erlmd_ext_gfm_autolink_literal
erlmd_ext_gfm_task_list           % ✓ Simplified
erlmd_ext_gfm_footnote_definition
erlmd_ext_gfm_label_start_footnote
```

---

## Common Functions

```erlang
% Construct entry points
start/1                    % Entry point
inside/1, after/1          % State functions
continuation/1             % Continuation
resolve/1                  % Post-processing

% Tokenizer operations
consume/1                  % Consume byte
enter/2, exit/1           % Enter/exit construct
attempt/3                  % Try with backtracking
current/1, peek/2         % Lookahead

% Boolean predicates
is_whitespace/1
is_alpha/1
is_digit/1
has_markers/1
can_interrupt/2
```

---

## Event Names (atoms)

```erlang
% Block events
paragraph, heading_atx, thematic_break
block_quote, list_item, code_fenced

% Inline events  
emphasis, strong, code_text
link, image, hard_break_escape

% Partial events
data, line_ending, space_or_tab
```

---

## Quick Decisions Reference

### ✅ DO Use

```erlang
erlmd_html                     % Output module
erlmd_ast                      % AST module
erlmd_cnstr_html_flow          % HTML construct
erlmd_cnstr_blank_line         % Regular construct
consts.hrl                     % Constants
types.hrl                      % Types
erlmd_cnstr_prtl_non_lazy_cont % Abbreviated
```

### ❌ DON'T Use

```erlang
erlmd_to_html                  % Old name
erlmd_to_mdast                 % Old name
erlmd_cnstr_html_block         % Wrong name
erlmd_cnstr_prtl_blank_line    % Doesn't exist
erlmd_util_constant            % Not abbreviated, not an include
erlmd_util_types               % Not abbreviated, not an include
erlmd_compiler                 % Removed
erlmd_construct_*              % Old prefix
erlmd_*_internal               % Wrong pattern
```

---

## File Naming

```
Module Name                → File Path
erlmd_cnstr_paragraph      → src/erlmd_cnstr_paragraph.erl
erlmd_cnstr_prtl_data      → src/erlmd_cnstr_prtl_data.erl
erlmd_util_char            → src/erlmd_util_char.erl
erlmd_ext_gfm_table        → src/erlmd_ext_gfm_table.erl

Test Module                → Test Path
erlmd_cnstr_paragraph_test → test/erlmd_cnstr_paragraph_test.erl
erlmd_util_char_test       → test/erlmd_util_char_test.erl
```

---

## Header Files

```
types.hrl            % Core records and types
consts.hrl           % Constants
macros.hrl           % Macros
```

---

## Common Confusions - RESOLVED

### Q1: Output modules?
**A**: `erlmd_html` and `erlmd_ast` (NOT `to_html` or `to_mdast`)

### Q2: Is blank_line partial?
**A**: NO. It's a regular construct: `erlmd_cnstr_blank_line`

### Q3: HTML construct naming?
**A**: Use `erlmd_cnstr_html_flow` and `erlmd_cnstr_html_text`
(NOT `html_block`)

### Q4: Are dispatchers constructs?
**A**: YES. They use `erlmd_cnstr_*` prefix because they implement the construct pattern

### Q5: When to abbreviate continuation?
**A**: Only in very long names to keep under 40 chars
Example: `erlmd_cnstr_prtl_non_lazy_cont`

---

## Anti-Patterns

```erlang
% ❌ Mixing old and new conventions
erlmd_construct_paragraph  % Old
erlmd_cnstr_heading       % New
% Pick one and be consistent!

% ❌ Wrong output names
erlmd_to_html             % Wrong
erlmd_html                % Right ✓

% ❌ Wrong HTML construct
erlmd_cnstr_html_block    % Wrong
erlmd_cnstr_html_flow     % Right ✓

% ❌ Blank line as partial
erlmd_cnstr_prtl_blank_line  % Wrong - doesn't exist
erlmd_cnstr_blank_line       % Right ✓

% ❌ Using _internal suffix
tokenizer_internal        % Wrong
erlmd_pvt_tokenizer       % Right ✓

% ❌ Over-abbreviating
erlmd_c_p_d               % Too cryptic
erlmd_cnstr_prtl_data     % Right ✓
```

---

## Migration Quick Check

Find old patterns:
```bash
grep -r "erlmd_construct_" src/
grep -r "erlmd_to_html\|erlmd_to_mdast" src/
grep -r "_internal" src/
```

Replace patterns:
```bash
# Output modules
s/erlmd_to_html/erlmd_html/g
s/erlmd_to_mdast/erlmd_ast/g

# HTML constructs (special case!)
s/erlmd_construct_html_block/erlmd_cnstr_html_flow/g

# Partial constructs first (more specific)
s/erlmd_construct_partial_/erlmd_cnstr_prtl_/g

# GFM extensions
s/erlmd_construct_gfm_/erlmd_ext_gfm_/g

# Regular constructs
s/erlmd_construct_/erlmd_cnstr_/g

# Utilities
s/erlmd_util_character_reference/erlmd_util_char_ref/g
s/erlmd_util_normalize_identifier/erlmd_util_normalize_id/g
```

---

## Module Count

| Category | Count |
|----------|-------|
| Core Framework | 8 |
| Content Dispatchers | 4 |
| Block Constructs | 11 |
| Inline Constructs | 10 |
| Partial Constructs | 8 |
| Utilities | 7 |
| GFM Extensions | 6 |
| **Total** | **54** |

---

## Visual Pattern Guide

```
erlmd_
├── Core framework modules (8)
│   ├── erlmd.erl
│   ├── erlmd_parser.erl
│   ├── erlmd_tokenizer.erl
│   ├── erlmd_state.erl
│   ├── erlmd_event.erl
│   ├── erlmd_html.erl          ← Output
│   ├── erlmd_ast.erl           ← Output
│   ├── erlmd_subtokenize.erl
│   └── erlmd_resolve.erl
│
├── erlmd_cnstr_
│   ├── Content dispatchers (4)
│   │   ├── document.erl
│   │   ├── flow.erl
│   │   ├── text.erl
│   │   └── string.erl
│   │
│   ├── Block constructs (11)
│   │   ├── paragraph.erl
│   │   ├── heading_atx.erl
│   │   ├── html_flow.erl      ← NOT html_block
│   │   └── blank_line.erl     ← NOT partial
│   │
│   ├── Inline constructs (10)
│   │   ├── attention.erl
│   │   ├── code_text.erl
│   │   └── ...
│   │
│   └── erlmd_cnstr_prtl_
│       └── Partial constructs (8)
│           ├── data.erl
│           ├── space_or_tab.erl
│           ├── non_lazy_cont.erl  ← Abbreviated
│           └── ...
│
├── erlmd_util_
│   └── Utilities (7)
│       ├── char.erl
│       ├── char_ref.erl           ← Abbreviated
│       ├── normalize_id.erl       ← Abbreviated
│       └── ...
│
├── erlmd_ext_
│   └── Extensions
│       └── erlmd_ext_gfm_
│           └── GFM Extensions (6)
│               ├── table.erl
│               ├── task_list.erl  ← Simplified
│               └── ...
│
└── erlmd_pvt_
    └── Private modules (as needed)
        ├── tokenizer.erl
        └── ...
```

---

## Name Length Guidelines

| Category | Target | Maximum |
|----------|--------|---------|
| Core modules | 15-20 chars | 30 chars |
| Constructs | 25-30 chars | 35 chars |
| Partial constructs | 30-35 chars | 40 chars |
| Utilities | 20-25 chars | 30 chars |
| Extensions | 30-35 chars | 40 chars |

**Examples**:
- `erlmd_html` → 11 chars ✓
- `erlmd_cnstr_paragraph` → 23 chars ✓
- `erlmd_cnstr_prtl_space_or_tab` → 32 chars ✓
- `erlmd_cnstr_prtl_non_lazy_cont` → 34 chars ✓
- `erlmd_ext_gfm_autolink_literal` → 32 chars ✓

---

## Critical Remember

1. **Output**: `erlmd_html` NOT `erlmd_to_html`
2. **HTML**: `html_flow` NOT `html_block`
3. **Blank**: Regular construct, NOT partial
4. **Constants**: `const` NOT `constant`
5. **Dispatchers**: They ARE constructs (use `cnstr_`)
6. **No compiler**: Module removed, not needed

---

## Testing Checklist

After applying naming conventions:

- [ ] All modules use correct prefix
- [ ] No `erlmd_construct_*` references remain
- [ ] No `erlmd_to_*` output references remain
- [ ] No `erlmd_compiler` references remain
- [ ] All utilities use abbreviated names
- [ ] HTML constructs use `flow`/`text` not `block`
- [ ] Blank line is regular, not partial
- [ ] All names under 40 characters
- [ ] Consistent across all files

---

## Version Info

- **Document Version**: 1.1
- **Created**: November 14, 2025
- **Status**: Active standard
- **Total Modules**: 54 core modules
- **Average Name Length**: 29 characters (22% shorter than v1.0)

---

## Quick Links

- Full conventions: `012-naming-conventions.md`
- Migration guide: `naming-migration-guide.md`
- Update summary: `naming-update-summary.md`
- Analysis document: `naming-analysis.md`

---

*Print this page for quick reference during development!*
